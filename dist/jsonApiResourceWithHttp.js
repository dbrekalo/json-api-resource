var jsonApiResource=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports={assign:function(t,e){if(e)for(var i in e)n(e,i)&&void 0!==e[i]&&(t[i]=e[i]);return t},each:function(t,e){for(var i in t)n(t,i)&&e(t[i],i)},isArray:function(t){return t&&t.constructor===Array},pick:function(t,e,i){return i.forEach((function(i){n(e,i)&&(t[i]=e[i])})),t},clientId:function t(){return t.counter=t.counter||1,"c"+ ++t.counter},hasOwn:n}},function(t,e){function n(t,e,n){var o=e&&i(e,"constructor")?e.constructor:function(){t&&t.apply(this,arguments)};if(t){var s=function(){this.constructor=o};s.prototype=t.prototype,o.prototype=new s,r(o,t)}return n&&r(o,n),e&&r(o.prototype,e),o}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(t,e){if(e)for(var n in e)i(e,n)&&void 0!==e[n]&&(t[n]=e[n]);return t}t.exports=function(t,e){var i=n(null,t,e);return i.extend=function(t,e){return n(this,t,e)},i}},function(t,e,n){var i=n(1),r=n(0),o=r.isArray,s=r.clientId,a=r.hasOwn,u=i({constructor:function(t,e){this.cid=s(),this.syncWithData(t,e)},get:function(t){return"string"==typeof t?this.getProperty(t):this.normalize(t)},getProperty:function(t){return this.map((function(e){return e.get(t)}))},getModel:function(t,e){if(this.modelMap&&t&&e)return this.modelMap[t+"@"+e];var n=void 0!==t,i=this.models.filter((function(i){var r=!n||t===i.getId(),o=!e||e===i.getType();return!(!n&&!e)&&(r&&o)}));return i.length?i[0]:void 0},where:function(t){return this.models.filter((function(e){var n=!0;for(var i in t)if(a(t,i)&&!(n=t[i]===e.get(i)))break;return n}))},findWhere:function(t){var e=this.where(t);return e.length?e[0]:void 0},add:function(t){var e=this;return(o(t)?t:[t]).forEach((function(t){e.has(t)||e.models.push(t),e.updateModelMap("add",t)})),this.length=this.models.length,this},updateModelMap:function(t,e){if(this.modelMap){var n=e.getId(),i=e.getType();if(n&&i){var r=n+"@"+i;"add"===t?this.modelMap[r]=e:"remove"===t&&delete this.modelMap[r]}}return this},has:function(t){return Boolean(this.getModel(t.getProperty("id"),t.getType()))},remove:function(t){return this.models=this.models.filter((function(e){return e!==t})),this.updateModelMap("remove",t),this.length=this.models.length,this},syncWithData:function(t,e){var n=e&&e.Model||this.Model,i=u.prototype.Model,r=this;if(e=e||{},t)if("string"==typeof t&&(t=JSON.parse(t)),o(t))this.models=t;else{this.models=t.data.map((function(t){return new n({data:t},{assignIncludes:!1})}));var s=(t.included||[]).map((function(t){return new i({data:t},{assignIncludes:!1})}));new u(this.models.concat(s),{isIncluded:!0,sourceCollection:r}),this.meta=t.meta||{}}return this.models=this.models||[],this.length=this.models.length,this.meta=this.meta||{},e.isIncluded?(this.modelMap={},this.models.forEach((function(t){r.updateModelMap("add",t),t.includedCollection=r,e.sourceCollection&&(t.sourceCollection=e.sourceCollection)}))):e.buildModelMap&&this.buildModelMap(),this},buildModelMap:function(){var t=this;return this.modelMap={},this.models.forEach((function(e){t.updateModelMap("add",e)})),this},normalize:function(t){return this.map((function(e){return e.normalize(t)}))},toArray:function(){return this.models}},{create:function(t,e){return new this(t,e)},getType:function(){return this.prototype.Model.getType()}});["forEach","map","filter","reduce","slice","find","sort"].forEach((function(t){u.prototype[t]=function(){return this.models[t].apply(this.models,arguments)}})),t.exports=u},function(t,e,n){var i=n(4),r=n(2),o=n(5),s=n(6);r.prototype.Model=i,t.exports={Model:o(i),Collection:s(r)}},function(t,e,n){var i=n(1),r=n(2),o=n(0),s=o.assign,a=o.isArray,u=o.each,c=o.clientId,l=i({type:void 0,state:void 0,sourceCollection:void 0,includedCollection:void 0,constructor:function(t,e){this.cid=c(),this.syncWithData(t,e)},syncWithData:function(t,e){return e=s({assignIncludes:!0},e),this.state={meta:{},data:{type:this.type||void 0,id:void 0,attributes:{},relationships:{}}},t&&(t="string"==typeof t?JSON.parse(t):t,s(this.state.data,t.data),s(this.state.meta,t.meta)),e.assignIncludes&&new r([this].concat((t&&t.included||[]).map((function(t){return new l({data:t},{assignIncludes:!1})}))),{isIncluded:!0}),this.state.data.type&&(this.type=this.state.data.type),this},setType:function(t){return this.type=t,this.state.data.type=t,this},get:function(t){return"id"===t?this.getId():"type"===t?this.getType():"string"==typeof t?this.getProperty(t):this.normalize(t)},getProperty:function(t){var e,n="string"==typeof t?t.split("."):t,i=n[0];if(this.state.data.relationships[i]){if(void 0!==(e=this.getRelation(i))){if(2===n.length&&e instanceof r)return e.getProperty(n[1]);if(n.length>1)return n.shift(),e.getProperty(n)}}else e="id"===i?this.getId():"type"===i?this.getType():this.getAttribute(i);return e},getId:function(){return this.state.data.id},getAttribute:function(t){return this.state.data.attributes[t]},getType:function(){return this.state.data.type},getRelation:function(t){var e=this.state.data.relationships[t],n=e&&e.data,i=this;return n?a(n)?new r(n.map((function(t){return i.includedCollection.getModel(t.id,t.type)})).filter((function(t){return t}))):this.includedCollection.getModel(n.id,n.type):void 0},getRelationshipReferences:function(t){var e=this.state.data.relationships[t];if(e){var n=e.data;return a(n)?n.length?n.map((function(t){return t.id})):void 0:n&&n.id?n.id:void 0}},normalize:function(t){var e={},n=this,i=function(t){throw new Error(t)};return t.forEach((function(t){var o,s,u;if("string"==typeof t?o=s=t:a(t)?(o=t[0],s=t[1]):i("Invalid schema structure"),"string"==typeof s)u=n.getProperty(s);else if("function"==typeof s)u=s(n);else if(a(s)){var c=n.getProperty(o);(c instanceof r||c instanceof l)&&(u=c.normalize(s))}else i("Invalid schema structure");(u instanceof l||u instanceof r)&&i("Data not properly normalized for key: "+o),e[o]=u})),e},setAttribute:function(t,e){var n=this.state.data.attributes;return 2===arguments.length?n[t]=e:s(n,t),this},setId:function(t){return this.state.data.id=t,this},setRelationship:function(t,e){var n=this,i=this.state.data.relationships,o={};return"string"==typeof t?o[t]=e:o=t,u(o,(function(t,e){var o;t instanceof l?(o={type:t.getType(),id:t.getProperty("id")},n.includedCollection.add(t)):t instanceof r?(o=t.map((function(t){return{type:t.getType(),id:t.getProperty("id")}})),n.includedCollection.add(t.models)):o=t,i[e]={data:o}})),this},isNew:function(){return void 0===this.state.data.id}},{create:function(t,e){return new this(t,e)},createFromAttributes:function(t,e){return this.create({data:{attributes:t}},e)},getType:function(){return this.prototype.type}});t.exports=l},function(t,e,n){var i=n(0),r=i.assign,o=i.isArray,s=i.each,a=i.pick,u={url:function(){return this.constructor.url({type:this.getType(),id:this.get("id")})},saveAttribute:function(t,e){return 2===arguments.length&&this.setAttribute(t,e),this.save({attributes:[t]})},saveRelationship:function(t,e){return e&&this.setRelationship(t,e),this.save({relationships:[t]})},saveFile:function(t,e){var n={};return void 0!==e?n[t]=e:n=t,this.save({files:n})},save:function(t){var e=this,n=this.constructor,i={},u={method:this.isNew()?"POST":"PUT",url:this.url()};if(t=t||{attributes:Object.keys(this.state.data.attributes),relationships:Object.keys(this.state.data.relationships)},a(i,this.state.data,["type","id"]),t.attributes&&(o(t.attributes)||(this.setAttribute(t.attributes),t.attributes=Object.keys(t.attributes)),r(i,{attributes:a({},this.state.data.attributes,t.attributes)})),t.relationships&&(o(t.relationships)||(this.setRelationship(t.relationships),t.relationships=Object.keys(t.relationships)),r(i,{relationships:a({},this.state.data.relationships,t.relationships)})),t.files){var c=new(n.getFormDataType());c.append("data",JSON.stringify(i)),s(t.files,(function(t,e){c.append(e,t)})),r(u,{method:"POST",data:c})}else r(u,{data:JSON.stringify({data:i})});return n.http(u).then((function(t){return e.syncWithData(t.data)}))},fetch:function(t){var e=this;return this.constructor.http({method:"GET",url:t&&t.url||this.url()}).then((function(t){return e.syncWithData(t.data),e}))},destroy:function(){var t=this;return this.constructor.http({method:"DELETE",url:this.url()}).then((function(e){return t.sourceCollection&&t.sourceCollection.remove(t),t.includedCollection&&t.includedCollection.remove(t),t}))}},c={baseUrl:"/",url:function(t){return t=r({type:this.prototype.type},t),this.appendQueryString([this.baseUrl,this.getTypeUrlSegment(t.type),t.id?"/"+t.id:""].join(""),t.query)},appendQueryString:function(t,e){var n=[],i="",r=function(t,e){s(t||{},(function(t,i){var s=e?e+"["+i+"]":i;o(t)?n.push([s,t.join(",")]):t===Object(t)?r(t,s):n.push([s,t])}))};return e===Object(e)?(r(e),i=n.filter((function(t){return void 0!==t[1]&&null!==t[1]&&t[1].toString().length>0})).map((function(t){return t.join("=")})).join("&")):"string"==typeof e&&(i=e),t+(i?"?"+i:"")},getTypeUrlSegment:function(t){return t},getFormDataType:function(){return FormData},getFromApi:function(t,e){var n=this;return n.http({method:"GET",url:t&&t.url?t.url:n.url("string"==typeof t?{id:t}:t)}).then((function(t){var i=new n(t.data);return e&&e(i),i}))}};t.exports=function(t){return r(t.prototype,u),r(t,c),t}},function(t,e,n){var i=n(0).assign,r={url:function(t){return this.prototype.Model.url(t)},getFromApi:function(t,e){var n=this;return"string"==typeof(t=t||{})&&(t={type:t}),n.http({method:"GET",url:t.url||n.url(t),contentType:"application/vnd.api+json"}).then((function(i){var r=new n(i.data,t);return e&&e(r),r}))}};t.exports=function(t){return i(t,r),t}}]);