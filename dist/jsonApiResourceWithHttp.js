var jsonApiResource=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e){function n(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function r(t,e,n){return n.forEach(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function i(t){return t&&t.constructor===Array}function o(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t[n]=e[n]);return t}function s(){return s.counter=s.counter||1,"c"+ ++s.counter}t.exports={assign:o,each:n,isArray:i,pick:r,clientId:s}},function(t,e,n){function r(t,e,n){var r=e.hasOwnProperty("constructor")?e.constructor:function(){t&&t.apply(this,arguments)};if(t){var o=function(){this.constructor=r};o.prototype=t.prototype,r.prototype=new o,i(r,t)}return n&&i(r,n),e&&i(r.prototype,e),r}var i=n(0).assign;t.exports=function(t,e){var n=r(null,t,e);return n.extend=function(t,e){return r(this,t,e)},n}},function(t,e,n){var r=n(1),i=n(0),o=i.isArray,s=i.clientId,a=r({constructor:function(t,e){this.cid=s(),this.syncWithData(t,e)},get:function(t){return"string"==typeof t?this.getProperty(t):this.normalize(t)},getProperty:function(t){return this.map(function(e){return e.get(t)})},getModel:function(t,e){var n=this.models.filter(function(n){var r=void 0!==t,i=!r||t===n.getProperty("id"),o=!e||e===n.getType();return!(!r&&!e)&&(i&&o)});return n.length?n[0]:void 0},where:function(t){return this.models.filter(function(e){var n=!0;for(var r in t)if(t.hasOwnProperty(r)&&!(n=t[r]===("type"===r?e.getType():e.getProperty(r))))break;return n})},findWhere:function(t){var e=this.where(t);return e.length?e[0]:void 0},add:function(t){var e=this;return(o(t)?t:[t]).forEach(function(t){e.has(t)||e.models.push(t)}),this.length=this.models.length,this},has:function(t){return Boolean(this.getModel(t.getProperty("id"),t.getType()))},remove:function(t){return this.models=this.models.filter(function(e){return e!==t}),this.length=this.models.length,this},syncWithData:function(t,e){var n=e&&e.Model||this.Model,r=a.prototype.Model,i=this;if(t)if("string"==typeof t&&(t=JSON.parse(t)),o(t))this.models=t;else{this.models=t.data.map(function(t){return new n({data:t},{assignIncludes:!1})});var s=(t.included||[]).map(function(t){return new r({data:t},{assignIncludes:!1})}),u=new a(this.models.concat(s));u.models.forEach(function(t){t.sourceCollection=i,t.includedCollection=u}),this.meta=t.meta||{}}return this.models=this.models||[],this.length=this.models.length,this.meta=this.meta||{},this},normalize:function(t){return this.map(function(e){return e.normalize(t)})}},{create:function(t,e){return new this(t,e)}});["forEach","map","filter","reduce","slice"].forEach(function(t){a.prototype[t]=function(){return this.models[t].apply(this.models,arguments)}}),t.exports=a},function(t,e,n){var r=n(4),i=n(2),o=n(5),s=n(6);i.prototype.Model=r,t.exports={Model:o(r),Collection:s(i)}},function(t,e,n){var r=n(1),i=n(2),o=n(0),s=o.assign,a=o.isArray,u=o.each,c=o.clientId,h=r({type:null,state:null,sourceCollection:null,includedCollection:null,constructor:function(t,e){this.cid=c(),this.syncWithData(t,e)},syncWithData:function(t,e){if(e=s({assignIncludes:!0},e),this.state={meta:{},data:{type:this.type||void 0,id:void 0,attributes:{},relationships:{}}},t&&(t="string"==typeof t?JSON.parse(t):t,s(this.state.data,t.data),s(this.state.meta,t.meta)),e.assignIncludes){var n=new i([this].concat((t&&t.included||[]).map(function(t){return new h({data:t},{assignIncludes:!1})})));n.forEach(function(t){t.includedCollection=n})}return this.state.data.type&&(this.type=this.state.data.type),this},getType:function(){return this.state.data.type},setType:function(t){return this.type=t,this.state.data.type=t,this},get:function(t){return"string"==typeof t?this.getProperty(t):this.normalize(t)},getProperty:function(t){var e,n="string"==typeof t?t.split("."):t,r=n[0];if(this.state.data.relationships[r]){if(void 0!==(e=this.getRelation(r))){if(2===n.length&&e instanceof i)return e.getProperty(n[1]);if(n.length>1)return n.shift(),e.getProperty(n)}}else e=this.getAttribute(r);return e},getAttribute:function(t){return"id"===t?this.state.data.id:this.state.data.attributes[t]},getRelation:function(t){var e=this.state.data.relationships[t],n=e&&e.data,r=this;return n?a(n)?new i(n.map(function(t){return r.includedCollection.getModel(t.id,t.type)})):r.includedCollection.getModel(n.id,n.type):void 0},getRelationshipReferences:function(t){var e=this.state.data.relationships[t];if(e){var n=e.data;return a(n)?n.length?n.map(function(t){return t.id}):void 0:n&&n.id?n.id:void 0}},normalize:function(t){var e={},n=this,r=function(t){throw new Error(t)};return t.forEach(function(t){var o,s,u;if("string"==typeof t?o=s=t:a(t)?(o=t[0],s=t[1]):r("Invalid schema structure"),"string"==typeof s)u=n.getProperty(s);else if("function"==typeof s)u=s(n);else if(a(s)){var c=n.getProperty(o);(c instanceof i||c instanceof h)&&(u=c.normalize(s))}else r("Invalid schema structure");(u instanceof h||u instanceof i)&&r("Data not properly normalized for key: "+o),e[o]=u}),e},setAttribute:function(t,e){var n=this.state.data.attributes;return 2===arguments.length?n[t]=e:s(n,t),this},setRelationship:function(t,e){var n=this,r=this.state.data.relationships,o={};return"string"==typeof t?o[t]=e:o=t,u(o,function(t,e){var o;t instanceof h?(o={type:t.getType(),id:t.getProperty("id")},n.includedCollection.add(t)):t instanceof i?(o=t.map(function(t){return{type:t.getType(),id:t.getProperty("id")}}),n.includedCollection.add(t.models)):o=t,r[e]={data:o}}),this},isNew:function(){return void 0===this.state.data.id}},{create:function(t,e){return new this(t,e)},createFromAttributes:function(t,e){return this.create({data:{attributes:t}},e)}});t.exports=h},function(t,e,n){var r=n(0),i=r.assign,o=r.isArray,s=r.each,a=r.pick,u={url:function(){return this.constructor.url({type:this.getType(),id:this.get("id")})},saveAttribute:function(t,e){return 2===arguments.length&&this.setAttribute(t,e),this.save({attributes:[t]})},saveRelationship:function(t,e){return e&&this.setRelationship(t,e),this.save({relationships:[t]})},saveFile:function(t,e){var n={};return void 0!==e?n[t]=e:n=t,this.save({files:n})},save:function(t){var e=this,n=this.constructor,r={},u={method:this.isNew()?"POST":"PUT",url:this.url()};if(t=t||{attributes:Object.keys(this.state.data.attributes),relationships:Object.keys(this.state.data.relationships)},a(r,this.state.data,["type","id"]),t.attributes&&(o(t.attributes)||(this.setAttribute(t.attributes),t.attributes=Object.keys(t.attributes)),i(r,{attributes:a({},this.state.data.attributes,t.attributes)})),t.relationships&&(o(t.relationships)||(this.setRelationship(t.relationships),t.relationships=Object.keys(t.relationships)),i(r,{relationships:a({},this.state.data.relationships,t.relationships)})),t.files){var c=n.getFormDataType(),h=new c;h.append("data",JSON.stringify(r)),s(t.files,function(t,e){h.append(e,t)}),i(u,{method:"POST",data:h})}else i(u,{data:JSON.stringify({data:r})});return n.http(u).then(function(t){return e.syncWithData(t.data)})},fetch:function(){var t=this;return this.constructor.http({method:"GET",url:this.url()}).then(function(e){return t.syncWithData(e.data),t})},destroy:function(){var t=this;return this.constructor.http({method:"DELETE",url:this.url()}).then(function(e){return t.sourceCollection&&t.sourceCollection.remove(t),t.includedCollection&&t.includedCollection.remove(t),t})}},c={baseUrl:"/",url:function(t){var e=this;return t=i({type:e.prototype.type},t),e.appendQueryString([e.baseUrl,e.getTypeUrlSegment(t.type),t.id?"/"+t.id:""].join(""),t.query)},appendQueryString:function(t,e){var n=[],r="",i=function(t,e){s(t||{},function(t,r){var s=e?e+"["+r+"]":r;o(t)?n.push([s,t.join(",")]):t===Object(t)?i(t,s):n.push([s,t])})};return e===Object(e)?(i(e),r=n.filter(function(t){return t[1].toString().length>0}).map(function(t){return t.join("=")}).join("&")):"string"==typeof e&&(r=e),t+(r?"?"+r:"")},getTypeUrlSegment:function(t){return t},getFormDataType:function(){return FormData},getFromApi:function(t,e){var n=this;return n.http({method:"GET",url:n.url("string"==typeof t?{id:t}:t)}).then(function(t){var r=new n(t.data);return e&&e(r),r})}};t.exports=function(t){return i(t.prototype,u),i(t,c),t}},function(t,e,n){var r=n(0),i=r.assign,o={url:function(t){return this.prototype.Model.url(t)},getFromApi:function(t,e){var n=this;return"string"==typeof t&&(t={type:t}),n.http({method:"GET",url:t.url||n.url(t),contentType:"application/vnd.api+json"}).then(function(r){var i=new n(r.data,t);return e&&e(i),i})}};t.exports=function(t){return i(t,o),t}}]);